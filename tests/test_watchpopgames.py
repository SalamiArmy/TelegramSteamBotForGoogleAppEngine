# coding=utf-8

import ConfigParser

import telegram

import unittest
from google.appengine.ext import ndb
from google.appengine.ext import testbed

import commands.watchpopgames as watchpopgames

class TestWatchBitcoin(unittest.TestCase):
    def setUp(self):
        # First, create an instance of the Testbed class.
        self.testbed = testbed.Testbed()
        # Then activate the testbed, which prepares the service stubs for use.
        self.testbed.activate()
        # Next, declare which service stubs you want to use.
        self.testbed.init_datastore_v3_stub()
        self.testbed.init_memcache_stub()
        self.testbed.init_user_stub()
        # Clear ndb's in-context cache between tests.
        # This prevents data from leaking between tests.
        # Alternatively, you could disable caching by
        # using ndb.get_context().set_cache_policy(False)
        ndb.get_context().clear_cache()

    def test_watchtopgames_with_addremovedgames(self):
        keyConfig = ConfigParser.ConfigParser()
        keyConfig.read(["keys.ini", "..\keys.ini"])
        bot = telegram.Bot(keyConfig.get('Telegram', 'TELE_BOT_ID'))
        chatId = keyConfig.get('BotAdministration', 'ADMIN_PRIVATE_CHAT_ID')

        watchpopgames.setWatchValue(chatId, '*Most Popular Steam Games:*\nPLAYERUNKNOWN\'S BATTLEGROUNDS\nDota 2\nCounter-Strike: Global Offensive\nH1Z1: King of the Kill\nGrand Theft Auto V\nTeam Fortress 2\nWarframe\nFootball Manager 2017\nTom Clancy\'s Rainbow Six Siege\nARK: Survival Evolved\nPAYDAY 2\nPath of Exile\nRust\nPaladins\nRocket League\nSid Meier\'s Civilization V\nGarry\'s Mod\nXCOM 2\nUnturned\nArma 3\nFallout 4\nEuro Truck Simulator 2\nBlack Desert Online\nTerraria\nMonaco\nDead by Daylight\nThe Elder Scrolls V: Skyrim\nSid Meier\'s Civilization VI\nThe Witcher 3: Wild Hunt\nCounter-Strike\nTotal War: WARHAMMER\nThe Elder Scrolls V: Skyrim Special Edition\nWar Thunder\nLeft 4 Dead 2\n7 Days to Die\nEuropa Universalis IV\nClicker Heroes\nHearts of Iron IV\nWallpaper Engine\nThe Elder Scrolls Online: Tamriel Unlimited\nFootball Manager 2016\nShadowverse\nWorld of Tanks Blitz\nCities: Skylines\nBlack Squad\nAge of Empires II: HD Edition\nMount & Blade: Warband\nSMITE\nThe Walking Dead\nFactorio\nDon\'t Starve Together\nTotal War: ROME II - Emperor Edition\nStardew Valley\nSpacewar\nFarming Simulator 17\nDARK SOULS™ III\nThe Binding of Isaac: Rebirth\nNBA 2K17\nTrove\nRimWorld\nCrossout\nStellaris\nCounter-Strike: Source\nFINAL FANTASY XIV Online\nBorderlands 2\nMirage: Arcane Warfare\nTom Clancy\'s The Division\nBrawlhalla\nInfestation: The New Z\nTotal War: ATTILA\nLast Man Standing\nHeroes & Generals\nRealm Grinder\nCrusader Kings II\nMOBIUS FINAL FANTASY\nCompany of Heroes 2\nWarface\nFootball Manager 2015\nElite Dangerous\nF1 2017\nTotal War: SHOGUN 2\nMedieval II: Total War\nCall of Duty: Black Ops III\nFallout: New Vegas\nConan Exiles\nTEKKEN 7\nDark and Light\nFallout Shelter\nEmpire: Total War\nEVGA Precision XOC\nPro Evolution Soccer 2017\nNieR:Automata™\nBattlerite\nMicrosoft Flight Simulator X: Steam Edition\nAdVenture Capitalist\nRobocraft\nGeometry Dash\nStarbound\nDirty Bomb\nTree of Savior (English Ver.)\nThe Forest\nNeverwinter\nSpace Engineers\nFishing Planet\nCar Mechanic Simulator 2018\nMiddle-earth™: Shadow of Mordor™\nKilling Floor 2\nDayZ\nThe Sims(TM) 3\nNo Man\'s Sky\nKerbal Space Program\nZombidle: REMONSTERED\nSubnautica\nMETAL GEAR SOLID V: THE PHANTOM PAIN\nMagic Duels\nDon\'t Starve\nEVE Online\nCounter-Strike Nexon: Zombies\nThe Long Dark\nInsurgency\nCrusaders of the Lost Idols\nOxygen Not Included\nGrim Dawn\nFor Honor\nFootball Manager 2014\nZula Europe\nAmerican Truck Simulator\nPlanetSide 2\nXCOM: Enemy Unknown\nSlime Rancher\nKnight Online\nAssetto Corsa\nTransport Fever\nThe Escapists 2\nGems of War\nShakes and Fidget\nPlanet Coaster\nShop Heroes\nAbsolver\nTom Clancy\'s Ghost Recon® Wildlands\nTree of Life\nCPUCores :: Maximize Your FPS\nRise of the Tomb Raider\nDarkest Dungeon\nPortal 2\nMotorsport Manager\nCompany of Heroes (New Steam Version)\nDying Light\nThe Elder Scrolls: Legends\nVEGA Conflict\nCreativerse\nJust Survive\nLife is Strange™\nCall of Duty: Black Ops II - Multiplayer\nIdle Champions of the Forgotten Realms\nNapoleon: Total War\nJust Cause 3\nBanished\nRomance of the Three Kingdoms 13\nDOOM\nDARK SOULS™: Prepare To Die Edition\nRealm of the Mad God\nAge of Empires® III: Complete Collection\nEmpyrion - Galactic Survival\nPrison Architect\nEnter the Gungeon\nInvisible Mind\nDivinity: Original Sin Enhanced Edition\nDishonored 2\nRiders of Icarus\nFriday the 13th: The Game\nDivinity: Original Sin 2\nStreet Fighter V\nBeamNG.drive\nDARK SOULS™ II: Scholar of the First Sin\nCall of Duty: Modern Warfare 2 - Multiplayer\nTrain Simulator\nTERA\nTyranny\nRome: Total War\nEternal Card Game\ntheHunter™: Call of the Wild\nDead Cells\nCall of Duty: Modern Warfare 3 - Multiplayer\nMidas Gold Plus\nPro Cycling Manager 2017\nSTAR WARS™ Empire at War: Gold Pack\nFreeStyle2: Street Basketball\nPRO EVOLUTION SOCCER 2017 TRIAL EDITION\nBlood Bowl 2\nSniper Elite 4\nFootball Manager Touch 2017\nSecret World Legends\nArma 2: Operation Arrowhead\nShellShock Live\nMafia III\nNOBUNAGA\'S AMBITION: Souzou SengokuRisshiden\nTERA\nDishonored\nProject CARS\nPrey\nMen of War: Assault Squad 2\nOgrest\nMad Max\nIdling to Rule the Gods\nCall of Duty: Infinite Warfare\nRising Storm 2: Vietnam\nLife is Feudal: Your Own\nScrap Mechanic\nSquad\nUndertale\nPillars of Eternity\nThe Witcher 2: Assassins of Kings Enhanced Edition\nSonic Mania\nBatman™: Arkham Knight\nSaints Row IV\nSid Meier\'s Civilization IV: Beyond the Sword\nTitan Quest Anniversary Edition\nWarhammer: End Times - Vermintide\nSpintires\nFarming Simulator 15\nTracks of Triumph: Summertime\nThe Witcher: Enhanced Edition\nDragon\'s Dogma: Dark Arisen\nFTL: Faster Than Light\nStronghold Kingdoms\nMafia II\nMOBIUS FINAL FANTASY\nLife is Strange: Before the Storm\nGrand Theft Auto IV\nSoda Dungeon\nSniper Ghost Warrior 3\nDead Bits\nAION Free-to-Play\nS.K.I.L.L. - Special Force 2\nMy Summer Car\nAPB Reloaded\nNBA 2K16\nStar Trek Online\nHollow Knight\nDRAGON BALL XENOVERSE 2\nSaints Row: The Third\nFootball Manager 2012\nDungeon Defenders II\nNARUTO SHIPPUDEN: Ultimate Ninja STORM 4\nTom Clancy\'s Splinter Cell Blacklist\nGigantic\nTown of Salem\nBorderlands: The Pre-Sequel\nRAID: World War II Beta\nThis War of Mine\nFootball Manager 2013\nSource Filmmaker\nAge of Mythology: Extended Edition\nMetin2\nCall of Duty: World at War\nAssassin\'s Creed IV Black Flag\nHalf-Life 2\nThe Lord of the Rings Online™\nGrand Theft Auto: San Andreas\nThe Elder Scrolls IV: Oblivion \nMiscreated\nFar Cry 4\nSid Meier\'s Civilization: Beyond Earth\nWargame: Red Dragon\nNo More Room in Hell\nBusiness Tour - Online Multiplayer Board Game\nDungeon Fighter Online\nNobunaga\'s Ambition: Souzou with Power Up Kit\nLost Castle\nHeroes of Might & Magic III - HD Edition\nTransformice\nTomb Raider\nShadow Warrior\nRPG Maker MV\nHITMAN™\nWatch Dogs 2\nQuake Champions\nRocksmith® 2014 Edition - Remastered\nCossacks 3\nWolfenstein: The New Order\nFoxhole\nRising Storm/Red Orchestra 2 Multiplayer\nDeus Ex: Mankind Divided™\nF1 2016\nMechWarrior Online\nSid Meier\'s Civilization III: Complete\nUltimate General: Civil War\nTorchlight II\nChivalry: Medieval Warfare\nOMSI 2\nTabletop Simulator\nHuniePop\nArt of War: Red Tides\nGolf With Your Friends\nCall of Duty: Modern Warfare 3 - Dedicated Server\nAge of Wonders III\nTropico 5\nFallout: New Vegas RU\nMabinogi\nBorderlands\nDigimon Masters Online\nHome Behind\nMarvel Puzzle Quest\nBioShock Infinite\nCounter-Strike: Condition Zero\nEverlasting Summer\nKilling Floor\nBlender 2.78\nWarhammer 40,000: Inquisitor - Martyr\nTwin Saga\nNorthgard\nWAKFU\nFar Cry® 3\ntheHunter Classic\nFaeria\nZombie Army Trilogy\nCall of Duty: Modern Warfare 3\nMapleStory\nWest of Loathing\nSpore\nEndless Space 2\nMortal Kombat X\nTime Clickers\nSurvarium\nThe Isle\nDuck Game\nPortal Knights\nYu-Gi-Oh! Legacy of the Duelist\nSins of a Solar Empire: Rebellion\nSouth Park™: The Stick of Truth™\nBloons TD Battles\nCall of Duty: Modern Warfare 2\nBattlestar Galactica Deadlock\nBorderless Gaming\nWarhammer 40,000: Dawn of War - Soulstorm\nResident Evil 6 / Biohazard 6\nMarvel Heroes Omega\nPlants vs. Zombies: Game of the Year\nBesiege\nHunieCam Studio\nCall of Duty: Black Ops - Multiplayer\nStronghold Crusader HD\nGalactic Civilizations III\nAwesomenauts\nArgo\nSakura Dungeon\nWarhammer 40,000: Dawn of War III\nDefiance\nAura Kingdom\nAkin\nBatman: Arkham City GOTY\nVictoria II\nProject Zomboid\nTHE KING OF FIGHTERS XIII STEAM EDITION\nFINAL FANTASY X/X-2 HD Remaster\nTERA\nTrackMania Nations Forever\nAmerica\'s Army: Proving Grounds\nAlien: Isolation\nFootball Manager 2017 Editor\nNext Day: Survival\nBlock N Load\nSid Meier\'s Civilization IV\nRIFT\nHurtworld\nOrcs Must Die! Unchained\nStar Trek Timelines\nSudden Strike 4\nAnno 1404: Venice\nBRAIN / OUT\nRise of Nations: Extended Edition\nSniper Elite 3\nOut of the Park Baseball 18\nThe Binding of Isaac\nDay of Defeat: Source\nThe Evil Within\n侠客风云传(Tale of Wuxia)\nLEGO® MARVEL Super Heroes\nSTAR WARS™ Knights of the Old Republic™ II: The Sith Lords™\nFrom The Depths\nAssassin\'s Creed Syndicate\nCrush Crush\nTiger Knight: Empire War\nPoly Bridge\nEuro Truck Simulator 2 Demo\nPro Evolution Soccer 2016\nBorderlands 2 RU\nDay of Infamy\n仙剑奇侠传四-Chinese Paladin 4\nHalf-Life\nPROTOTYPE 2\n古剑奇谭(GuJian)\nDiRT 3 Complete Edition\nStronghold Crusader 2\nMetro: Last Light Redux\nTrain Fever\nDiRT Rally\nWinning Post 8 2017\nMetro 2033 Redux\nPro Cycling Manager 2016\nCall of Duty: Black Ops\nQuake Live\nBloons TD5\nRagnarok Clicker\nAlien Swarm: Reactive Drop\nCall of Duty: Black Ops II - Zombies\nBLOCKADE 3D\nBattleBlock Theater\nDC Universe Online\nNaval Action\nFelix Jumpman\nThe Crew\nRage Parking Simulator 2016\nFaceRig\nPixel Worlds\nTap Heroes\nAssassin\'s Creed Unity\nMordheim: City of the Damned\nOne way to exit\nStar Conflict\nDragon Age: Origins - Ultimate Edition\nCraft The World\nEvolve Stage 2\nMount & Blade: With Fire and Sword\nEndless Legend\nCortexGear:AngryDroids\nHitman: Absolution\nFINAL FANTASY VII\nPanzer Corps\nScore a goal (Physical football)\nMaster of Orion\nBaldur\'s Gate: Enhanced Edition\nCastle Crashers\nJust Cause 2\nCar Mechanic Simulator 2015\nAseprite\nCandy Blast\nKingdoms and Castles\nASTA Online\nVerdun\nASTRONEER\nFallout 3 - Game of the Year Edition\nWWE 2K17\nForge of Gods (RPG)\nKingdoms of Amalur: Reckoning™\nConstruction-Simulator 2015\nMitos.is: The Game\nThe Elder Scrolls III: Morrowind\nSTAR WARS™ Battlefront™ II\nThe Tower Of Elements\nX-Plane 11\nSkyforge\nDiRT 4\nSimCity 4 Deluxe\nrFactor 2\nJourney To The Center Of The Earth\nFINAL FANTASY VIII\nAdVenture Communist\nBaldur\'s Gate II: Enhanced Edition\nLine of Sight\nThe Legend of Heroes: Trails of Cold Steel\nBattlefleet Gothic: Armada\nAtom Fishing II\nBattlefield: Bad Company 2\nAtlas Reactor\nPlanetbase\nPrototype\nGovernor of Poker 3\nBattle Brothers\nAssassin\'s Creed II\nTropico 4\nAlchemyland \nLEGO® Worlds\nSteel Division: Normandy 44')
        watchpopgames.addPreviouslyAddedTitlesValue(chatId, 'PAYDAY 2\nClicker Heroes\nStellaris\nTerraria\nFactorio\n7 Days to Die\nBlack Desert Online\nLeft 4 Dead 2\nStardew Valley\nPath of Exile\nXCOM 2\nThe Witcher 3: Wild Hunt\nTotal War: WARHAMMER\nEuro Truck Simulator 2\nDead by Daylight\nThe Elder Scrolls Online: Tamriel Unlimited\nThe Elder Scrolls V: Skyrim Special Edition\nWar Thunder\nWallpaper Engine\nEuropa Universalis IV\nHearts of Iron IV\nCities: Skylines\nFootball Manager 2016\nAge of Empires II: HD Edition\nDon\'t Starve Together\nTotal War: ROME II - Emperor Edition\nShadowverse\nWorld of Tanks Blitz\nRimWorld')
        watchpopgames.run(bot, chatId, 'SalamiArmy')
